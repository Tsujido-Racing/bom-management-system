# 統合BOM・在庫・見積もり管理システム

製造業向けの包括的な管理システムです。BOM（部品表）管理、在庫管理、見積もり作成、発注管理を統合したWebアプリケーションです。

## 🚀 主な機能

### 📋 BOM管理
- 階層型BOM構造の作成・編集
- 部品使用タイミングの管理（製造開始時、納品時、製造開始後N日）
- コスト自動計算
- バージョン管理

### 📦 部品マスタ管理
- 部品情報の登録・編集（品番、名称、カテゴリ、メーカー等）
- 定価・仕入れ値の管理
- 発注先・リードタイム情報

### 📊 在庫管理
- リアルタイム在庫数管理
- 発注点・最小在庫数設定
- 在庫アラート機能
- ステータス別フィルタリング

### 💰 見積もりシステム
- 顧客別見積もり作成
- BOM連動による自動コスト計算
- 製造スケジュール管理
- 在庫確認機能

### 🛒 発注管理
- 自動発注アラート生成
- 発注先別一括発注
- リードタイム考慮納期計算
- LINE通知連携（オプション）

### 📈 ダッシュボード
- 重要指標の一覧表示
- アクティビティ履歴
- アラート管理
- リアルタイムデータ同期

## 🛠️ 技術スタック

- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **データベース**: Firebase Firestore
- **認証**: Firebase Authentication
- **デプロイ**: Netlify
- **通知**: LINE Notify API（オプション）

## 📋 セットアップ手順

### 1. Firebase プロジェクトの作成

1. [Firebase Console](https://console.firebase.google.com/) にアクセス
2. 新しいプロジェクトを作成
3. Firestore データベースを有効化
4. Web アプリを追加し、設定情報を取得

### 2. Firebase 設定の更新

`index.html` の Firebase 設定部分を更新：

```javascript
const firebaseConfig = {
    apiKey: "your-api-key",
    authDomain: "your-project.firebaseapp.com",
    projectId: "your-project-id",
    storageBucket: "your-project.appspot.com",
    messagingSenderId: "123456789",
    appId: "your-app-id"
};
```

### 3. Netlify でのデプロイ

#### 方法 1: Git 連携（推奨）

1. GitHub/GitLab にリポジトリを作成
2. プロジェクトファイルをプッシュ
3. Netlify で「New site from Git」を選択
4. リポジトリを連携

#### 方法 2: 手動デプロイ

1. Netlify にログイン
2. 「Deploy manually」を選択
3. プロジェクトフォルダをドラッグ&ドロップ

### 4. 環境変数の設定（オプション）

Netlify の管理画面で以下の環境変数を設定：

- `FIREBASE_API_KEY`
- `FIREBASE_AUTH_DOMAIN`
- `FIREBASE_PROJECT_ID`
- `FIREBASE_STORAGE_BUCKET`
- `FIREBASE_MESSAGING_SENDER_ID`
- `FIREBASE_APP_ID`

## 🔧 LINE通知の設定（オプション）

1. [LINE Notify](https://notify-bot.line.me/) でトークンを取得
2. システム右上の通知ボタン（🔔）をクリック
3. 取得したトークンを入力して保存
4. テスト送信で動作確認

## 📁 ファイル構成

```
bom-management-system/
├── index.html              # エントリーポイント（ダッシュボードにリダイレクト）
├── dashboard.html          # ダッシュボードページ
├── parts.html              # 部品マスタページ
├── bom.html                # BOM管理ページ
├── inventory.html          # 在庫管理ページ
├── quote.html              # 見積もりページ
├── orders.html             # 発注管理ページ
├── css/
│   └── common.css          # 共通スタイルシート
├── js/
│   ├── common.js           # 共通機能・データモデル
│   └── import-export.js    # インポート・エクスポート機能
├── bom-functions.js        # BOM管理機能
├── inventory-functions.js  # 在庫管理機能
├── quote-functions.js      # 見積もり機能
├── order-functions.js      # 発注管理機能
├── schedule-functions.js   # 製造スケジュール機能
├── netlify.toml           # Netlify設定
└── README.md              # このファイル
```

## 🎯 使用方法

### 初期設定

1. システムにアクセス
2. 「部品マスタ」で基本的な部品情報を登録
3. 「在庫管理」で初期在庫を設定

### BOM作成

1. 「BOM管理」→「新規BOM作成」
2. 製品情報と使用部品を入力
3. 使用タイミングを設定

### 見積もり作成

1. 「見積もり」→「新規見積もり」
2. 顧客情報と製品情報を入力
3. 対応するBOMを選択
4. 自動コスト計算を確認

### 発注管理

1. ダッシュボードで在庫アラートを確認
2. 「発注管理」→「一括発注作成」
3. 発注内容を確認して実行
4. LINE通知で発注完了をお知らせ

### 製造スケジュール

1. BOMと製造開始日が設定された見積もりを作成
2. 見積もり一覧でカレンダーアイコンをクリック
3. 自動生成された製造スケジュールを確認
4. 必要に応じて製造指示書をダウンロード

### データ管理

- 右上の同期ボタン（🔄）で手動データ同期
- Google連携ボタン（G）でGoogleスプレッドシート設定
- LINE通知ボタン（🔔）で通知設定
- フォーム入力時はリアルタイム検証機能が動作

### データインポート・エクスポート

#### Googleスプレッドシート連携
1. Google Cloud ConsoleでAPIキーとクライアントIDを取得
2. システムの「Google連携設定」で認証情報を入力
3. 「接続テスト」で動作確認
4. 「Sheetsインポート」でスプレッドシートからデータを取得
5. 指定したスプレッドシートと定期同期も可能

**トラブルシューティング:**
- エラーが発生した場合は「デバッグ情報」ボタンで状況確認
- [Google設定ガイド](GOOGLE_SETUP_GUIDE.md)で詳細な手順を参照
- OAuth設定で「承認済みJavaScriptオリジン」の設定確認が重要

#### CSVインポート・エクスポート
1. 各ページの「CSVインポート」ボタンでファイルアップロード
2. テンプレートダウンロードで正しい形式を確認
3. 「エクスポート」ボタンで現在のデータをCSV出力

### パフォーマンス最適化

- 各ページで大量データに対応したページネーション（50件/ページ）
- リアルタイムデータ同期と定期更新
- 遅延読み込みによる高速化

## 🔒 セキュリティ

- Firebase Authentication による認証
- Firestore セキュリティルールの適用
- HTTPS通信の強制
- XSS対策の実装

## 📞 サポート

システムに関する質問や問題がある場合は、開発チームまでお問い合わせください。

## 📄 ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 🔄 アップデート履歴

### v2.0.0 (2024年) - スケーラブル版
- **アーキテクチャ刷新**: ページ分割によるスケーラビリティ向上
- **Googleスプレッドシート連携**: リアルタイムデータ同期
- **CSVインポート・エクスポート**: 大量データの一括処理
- **ページネーション**: 50件/ページでパフォーマンス最適化
- **共通コンポーネント化**: 保守性とコード再利用性向上
- **在庫一括更新**: CSVによる効率的な在庫管理
- **Google API統合**: Sheets APIによる外部データ連携
- **データ検証強化**: リアルタイム検証とエラーハンドリング改善

### v1.1.0 (2024年)
- 完全版リリース
- 製造スケジュール自動生成機能
- LINE通知機能の実装
- リアルタイムフォーム検証
- 在庫ステータス自動更新
- モーダル機能強化（フォーカストラップ、ESCキー対応）
- データ同期機能
- BOM階層構造表示改善

### v1.0.0 (2024年)
- 初期リリース
- 基本的なBOM・在庫・見積もり管理機能
- Firebase連携
- Netlifyデプロイ対応
